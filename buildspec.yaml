version: 0.2

phases:
  install:
    runtime-versions:
      dotnet: 7.0 # Use the appropriate version of .NET Core SDK
    commands:
      - echo "Installing dependencies..."
      - cd RedisAsDB.API # Change this to your app's directory
      - dotnet restore

  pre_build:
    commands:
      - echo "Running pre-build tasks..."
      # You can add any pre-build tasks here

  build:
    commands:
      - echo "Building ASP.NET Core app..."
      - dotnet build --configuration Release
      # You might need additional build steps like webpack or asset pre-processing
      
  post_build:
    commands:
      - echo "Running post-build tasks..."
      - mkdir -p /codebuild/output/YourBuildOutput
      - cp -r RedisAsDB.API/bin/Release/net7.0/publish/* /codebuild/output/YourBuildOutput/
      # Copy build files to a location accessible from the CodeBuild environment
